<!DOCTYPE html><html lang="en"><head><title>Validações &nbspSIM-AM-PR</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="https://i.ibb.co/2KddCq7/23113851-300x300.png" type="image/x-icon"><script src="https://cdn.betha.cloud/base/g4/front-end/2.13/js/base.js"></script><script src="https://cdn.betha.cloud/base/g4/design/3.11.9/bth-design.js"></script><script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script><link rel="stylesheet" href="https://cdn.betha.cloud/base/g4/design/3.11.9/bth-design.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"><style> /* CSS for the main interaction */ .tabset {font-size: 15px;} .tabset > input[type="radio"] { position: absolute; left: -200vw; } .tabset .tab-panel { display: none; }.tabset>input:first-child:checked~.tab-panels>.tab-panel:first-child,.tabset>input:nth-child(3):checked~.tab-panels>.tab-panel:nth-child(2),.tabset>input:nth-child(5):checked~.tab-panels>.tab-panel:nth-child(3),.tabset>input:nth-child(7):checked~.tab-panels>.tab-panel:nth-child(4),.tabset>input:nth-child(9):checked~.tab-panels>.tab-panel:nth-child(5),.tabset>input:nth-child(11):checked~.tab-panels>.tab-panel:nth-child(6),.tabset>input:nth-child(13):checked~.tab-panels>.tab-panel:nth-child(7),.tabset>input:nth-child(15):checked~.tab-panels>.tab-panel:nth-child(8),.tabset>input:nth-child(17):checked~.tab-panels>.tab-panel:nth-child(9),.tabset>input:nth-child(19):checked~.tab-panels>.tab-panel:nth-child(10),.tabset>input:nth-child(21):checked~.tab-panels>.tab-panel:nth-child(11),.tabset>input:nth-child(23):checked~.tab-panels>.tab-panel:nth-child(12),.tabset>input:nth-child(25):checked~.tab-panels>.tab-panel:nth-child(13),.tabset>input:nth-child(27):checked~.tab-panels>.tab-panel:nth-child(14),.tabset>input:nth-child(29):checked~.tab-panels>.tab-panel:nth-child(15),.tabset>input:nth-child(31):checked~.tab-panels>.tab-panel:nth-child(16),.tabset>input:nth-child(33):checked~.tab-panels>.tab-panel:nth-child(17),.tabset>input:nth-child(35):checked~.tab-panels>.tab-panel:nth-child(18),.tabset>input:nth-child(37):checked~.tab-panels>.tab-panel:nth-child(19),.tabset>input:nth-child(39):checked~.tab-panels>.tab-panel:nth-child(20),.tabset>input:nth-child(41):checked~.tab-panels>.tab-panel:nth-child(21),.tabset>input:nth-child(43):checked~.tab-panels>.tab-panel:nth-child(22),.tabset>input:nth-child(45):checked~.tab-panels>.tab-panel:nth-child(23),.tabset>input:nth-child(47):checked~.tab-panels>.tab-panel:nth-child(24),.tabset>input:nth-child(49):checked~.tab-panels>.tab-panel:nth-child(25){display: block;}/* Styling */ .tabset > label { position: relative; display: inline-block; padding: 15px 15px 25px; border: 1px solid transparent; border-bottom: 0; cursor: pointer; font-weight: 600; top: 8px; } .tabset > label::after { content: ""; position: absolute; left: 15px; bottom: 10px; width: 22px; height: 4px; background: #8d8d8d; } .tabset > label:hover, .tabset > input:focus + label { color: #06c; } .tabset > label:hover::after, .tabset > input:focus + label::after, .tabset > input:checked + label::after { background: #06c; } .tabset > input:checked + label { border-color: #ccc; border-bottom: 1px solid #fff; margin-bottom: -1px; } .tab-panel { padding: 30px 0; border-top: 1px solid #ccc; } /* Demo purposes only */ *, *:before, *:after { box-sizing: border-box; }#myInput { background-image: url(https://image.flaticon.com/icons/svg/116/116836.svg); background-size: 100% 50%;/* Add a search icon to input */ background-position: 500px 12px; /* Position the search icon */ background-repeat: no-repeat; /* Do not repeat the icon image */ width: 100%; /* Full-width */ font-size: 16px; /* Increase font-size */ padding: 12px 20px 12px 40px; /* Add some padding */ border: 1px solid #ddd; /* Add a grey border */ margin-bottom: 12px; /* Add some space below the input */ } #myTable { border-collapse: collapse; /* Collapse borders */ width: 100%; /* Full-width */ border: 1px solid #ddd; /* Add a grey border */ font-size: 18px; /* Increase font-size */ } #myTable th, #myTable td { text-align: left; /* Left-align text */ padding: 12px; /* Add padding */ } #myTable tr { /* Add a bottom border to all table rows */ border-bottom: 1px solid #ddd; } #myTable tr.header, #myTable tr:hover { /* Add a grey background color to the table header and on hover */ background-color: #f1f1f1; }.fas.fa-exclamation-triangle{color: #ef1f41}.fas.fa-exclamation-circle{color: #deea00}.fas.fa-check-circle{ color: #04ce40 }.table-danger{background-color: #ffccce!important;} .table-warning{background-color: #fcf7b5!important;} .table-success{background-color: #b9d8b4!important;}body {            background-color: #fafafa;            font-size: 16px;            line-height: 1.5;            padding-top: 33px;        }        h1,        h2,        h3,        h4,        h5,        h6 {            font-weight: 400;        }        #header {            border-bottom: 5px solid #37474F;            color: #37474F;            margin-bottom: 1.5rem;        }        #revenue-tag {            font-weight: inherit !important;            border-radius: 0px !important;        }        .card {            border: 0rem;            border-radius: 0rem;        }        .card-header {            background-color: #37474F;            border-radius: 0 !important;            color: white;            margin-bottom: 0;            padding: 1rem;        }        .card-block {            border: 1px solid #cccccc;        }        .shadow {            box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),                0 1px 18px 0 rgba(0, 0, 0, 0.12),                0 3px 5px -1px rgba(0, 0, 0, 0.2);        }        #revenue-column-chart,        #products-revenue-pie-chart,        #orders-spline-chart,        #graficoAvisosArquivo,        #graficoAvisosArquivo,		 #graficoEvolucaoInconsistencias,        #chartContainer {            height: 300px;            width: 100%; }#myImg {            border-radius: 5px;            cursor: pointer;            transition: 0.3s;        }        .modal {            display: none;            /* Hidden by default */            position: fixed;            /* Stay in place */            z-index: 1;            /* Sit on top */            padding-top: 60px;            /* Location of the box */            left: 0;            top: 0;            width: 100%;            /* Full width */            height: 100%;            /* Full height */            overflow: auto;            /* Enable scroll if needed */            background-color: rgb(0, 0, 0);            /* Fallback color */            background-color: rgba(0, 0, 0, 0.9);            /* Black w/ opacity */        }        .modal-content {            margin: auto;            display: block;            width: 80%;            max-width: 500px;        }        /* Caption of Modal Image */        #caption {            margin: auto;            display: block;            width: 80%;            max-width: 700px;            text-align: center;            color: #ccc;            padding: 10px 0;            height: 150px;        }        /* Add Animation */        .modal-content,        #caption {            -webkit-animation-name: zoom;            -webkit-animation-duration: 0.6s;            animation-name: zoom;            animation-duration: 0.6s;        }        @-webkit-keyframes zoom {            from {                -webkit-transform: scale(0)            }            to {                -webkit-transform: scale(1)            }        }        @keyframes zoom {            from {                transform: scale(0)            }            to {                transform: scale(1)            }        }        /* The Close Button */        .close {            position: absolute;            top: 15px;            right: 35px;            color: #f1f1f1;            font-size: 40px;            font-weight: bold;            transition: 0.3s;        }        .close:hover,        .close:focus {            color: #bbb;            text-decoration: none;            cursor: pointer;        }        /* 100% Image Width on Smaller Screens */        @media only screen and (max-width: 700px) {            .modal-content {                width: 100%;            }        } #modal1 { background-color: transparent!important}</style></head><script>setInterval(function() { atualizaGraficoStacked();console.log("Dashboard atualizado!"); }, 60000);var registrosCorrigidos = [];var paragrafosCorrigidos = [];var numeroCorrecoes = 0;var numeroErros = 0;var numeroAvisos = 0;var qtdErrosFixo = 0;var qtdAvisosFixo = 0;function GetMaiorData(dadosApi){	var ultimaExecucao = "";	for(var i = 0; i < dadosApi.length; i++){		if(i === 0){			ultimaExecucao = dadosApi[i].dataGeracao;		} else{			if(dadosApi[i].dataGeracao > dadosApi[i-1].dataGeracao){				ultimaExecucao = dadosApi[i].dataGeracao;			}		}	}	return ultimaExecucao.replace("-","/").replace("-","/");}async function atualizaGraficoStacked(){var graficoStackedColumn = "";    var graficoErrosArquivo = "";var graficoAvisosArquivo = "";var dadosErro = [];var dadosAviso = [];var dadosErroStacked = [];var dadosAvisoStacked = [];var dadosCorrecoesStacked = [];var dadosEvolucaoErros = [];var dadosEvolucaoAvisos = [];var retornoApiChaves = await getDadosPorChave();var dadosCardDashboard = await getDadosPorUUID();var dadosCorrigidoDashboard = 0;qtdErrosFixo = dadosCardDashboard.object[0].quantidadeErrosFixo;qtdAvisosFixo = dadosCardDashboard.object[0].quantidadeAvisosFixo;if(dadosCardDashboard.object[0].tabelaCorrigida){	dadosCorrigidoDashboard = dadosCardDashboard.object[0].tabelaCorrigida.length;}document.querySelector(".ErrosCardDashboard").innerText = dadosCardDashboard.object[0].quantidadeErros;document.querySelector(".AvisosCardDashboard").innerText = dadosCardDashboard.object[0].quantidadeAvisos;document.querySelector(".CorrecoesCardDashboard").innerText = dadosCorrigidoDashboard;document.querySelector(".UltimaExecCardDashboard").innerText = GetMaiorData(retornoApiChaves.object);var first = true;var arquivos = document.querySelectorAll(".tab-panel");for (var i = 0; i < arquivos.length; i++) {if (arquivos[i].id != "Dashboard0" && arquivos[i].id != "Todos0") {if (first) {dadosErro.push({y: Number((arquivos[i].children[3].children[2].innerText)),name: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),indexLabel: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),legendText: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),exploded: true,});dadosAviso.push({y: Number((arquivos[i].children[3].children[5].innerText)),name: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),indexLabel: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),legendText: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),exploded: true,});dadosErroStacked.push({y: Number((arquivos[i].children[3].children[2].innerText)),label: (arquivos[i].id.substring(0, arquivos[i].id.length - 1))});dadosAvisoStacked.push({y: Number((arquivos[i].children[3].children[5].innerText)),label: (arquivos[i].id.substring(0, arquivos[i].id.length - 1))});dadosCorrecoesStacked.push({y: Number((arquivos[i].children[3].children[8].innerText)),label: (arquivos[i].id.substring(0, arquivos[i].id.length - 1))});} else {dadosErro.push({y: Number((arquivos[i].children[3].children[2].innerText)),name: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),indexLabel: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),legendText: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),});dadosAviso.push({y: Number((arquivos[i].children[3].children[5].innerText)),name: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),indexLabel: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),legendText: (arquivos[i].id.substring(0, arquivos[i].id.length - 1)),exploded: true,});dadosErroStacked.push({y: Number((arquivos[i].children[3].children[2].innerText)),label: (arquivos[i].id.substring(0, arquivos[i].id.length - 1))});dadosAvisoStacked.push({y: Number((arquivos[i].children[3].children[5].innerText)),label: (arquivos[i].id.substring(0, arquivos[i].id.length - 1))});dadosCorrecoesStacked.push({y: Number((arquivos[i].children[3].children[8].innerText)),label: (arquivos[i].id.substring(0, arquivos[i].id.length - 1))});}}}for (var i = 0; i < retornoApiChaves.object.length; i++) {	dadosEvolucaoErros.push({		label: retornoApiChaves.object[i].dataGeracao,		y: Number(retornoApiChaves.object[i].quantidadeErrosFixo),	});	dadosEvolucaoAvisos.push({		label: retornoApiChaves.object[i].dataGeracao,		y: Number(retornoApiChaves.object[i].quantidadeAvisosFixo),	});}graficoEvolucaoInconsistencias = new CanvasJS.Chart("graficoEvolucaoInconsistencias", {	theme: "light2",	animationEnabled: true,	axisY: {		includeZero: false,		title: "Numero de inconsistências",	},	toolTip: {		shared: "true"	},	legend: {		cursor: "pointer",	},	data: [	{		type: "spline",		color: "red",		showInLegend: true,		name: "Erros",		dataPoints: dadosEvolucaoErros	},	{		type: "spline",		color: "gold",		showInLegend: true,		name: "Avisos",		dataPoints: dadosEvolucaoAvisos	}]});graficoStackedColumn = new CanvasJS.Chart("chartContainer", {data: [{type: "stackedColumn",color: "#ffccce",dataPoints: dadosErroStacked}, {type: "stackedColumn",color: "#fcf7b5",dataPoints: dadosAvisoStacked}, {type: "stackedColumn",color: "#b9d8b4",dataPoints: dadosCorrecoesStacked}]});graficoErrosArquivo = new CanvasJS.Chart("products-revenue-pie-chart", {animationEnabled: true,theme: "theme2",legend: {fontSize: 14},toolTip: {borderThickness: 0,content: "<span style='color: {color};'>{name}</span>: #percent%",cornerRadius: 0},data: [{indexLabelFontColor: "#676464",indexLabelFontSize: 14,legendMarkerType: "square",legendText: "{indexLabel}",showInLegend: true,startAngle: 90,type: "pie",dataPoints: dadosErro,}]});graficoAvisosArquivo = new CanvasJS.Chart("graficoAvisosArquivo", {animationEnabled: true,theme: "theme2",legend: {fontSize: 14},toolTip: {borderThickness: 0,content: "<span style='color: {color};'>{name}</span>: #percent%",cornerRadius: 0},data: [{indexLabelFontColor: "#676464",indexLabelFontSize: 14,legendMarkerType: "square",legendText: "{indexLabel}",showInLegend: true,startAngle: 90,type: "pie",dataPoints: dadosAviso,}]});graficoEvolucaoInconsistencias.render();graficoErrosArquivo.render();graficoAvisosArquivo.render();graficoStackedColumn.render();}$(function () {atualizaGraficoStacked();});function download_csv(csv, filename) {var csvFile;var downloadLink;csvFile = new Blob(["﻿",csv], {type: "text/csv"});downloadLink = document.createElement("a");downloadLink.download = filename;downloadLink.href = window.URL.createObjectURL(csvFile);downloadLink.style.display = "none";document.body.appendChild(downloadLink);downloadLink.click();}function export_table_to_csv(html, filename) {var csv = [];var section = document.querySelector("#Todos0");var rows = section.querySelectorAll(".table-danger , .table-warning, .table-success");for (var i = 0; i < rows.length; i++) {var row = [], cols = rows[i].querySelectorAll("td, th");for (var j = 0; j < cols.length; j++){ if(j === 3){row.push(cols[j].children[0].dataset.content);}else{row.push(cols[j].innerText);}}csv.push(row.join('|'));}download_csv(csv.join("\n"), filename);}function geraRelCSV(){var html = document.querySelector("table").outerHTML;export_table_to_csv(html, "validacoes_SIM-AM-PR_21/02/2020_16-23.csv");}function mostraModalParametros(idModal){var display = document.querySelector(`#${idModal}`).style.display;if(display === "none"){var display = document.querySelector(`#${idModal}`).style.display = "block";}}function escondeModalParametros(idModal){document.querySelector(`#${idModal}`).style.display = "none";}function searchTableTodos(tableId,inputId) { var input, filter, found, table, tr, td, i, j; input = document.getElementById(inputId); filter = input.value.toUpperCase(); table = document.getElementById(tableId); tb = table.getElementsByTagName("tbody"); for(i =0; i < tb.length; i++){ tr = tb[i].getElementsByTagName("tr"); } for (i = 0; i < tr.length; i++) { td = tr[i].getElementsByTagName("td"); for (j = 0; j < td.length; j++) { if (td[j].innerHTML.toUpperCase().indexOf(filter) > -1) { found = true; } } if (found) { tr[i].style.display = ""; found = false; } else { tr[i].style.display = "none"; } } }async function progresso(progressId) {var elem = document.getElementById(progressId);var width = 30;var id = setInterval(await frame, 10);async function frame() {if (width >= 100) {clearInterval(id);} else {width++;elem.style.width = width + '%';}}}jQuery.each( [ "put", "delete" ], function( i, method ) {jQuery[ method ] = function( url, data, callback, type ) {	if ( jQuery.isFunction( data ) ) {	type = type || callback;	callback = data;	data = undefined;	};	return jQuery.ajax({	url: url,	type: method,	dataType: type,	data: data,	success: callback	});};});async function criaArquivo(uUID) {	var qtdErros = 0;	var qtdAviso = 0;	var dataGeracao = document.querySelector(".dataGeracao").innerText;	var chave = document.querySelector(".parametrosBanco").innerText;	erroAviso = document.querySelectorAll("h7");	erroAviso.forEach(element => {		if (!element.parentElement.parentElement.id.includes("Todos")) {			if (element.id.includes("qtdErro")) {				qtdErros += Number(element.innerText);			}			if (element.id.includes("qtdAviso")) {				qtdAviso += Number(element.innerText);			}		}	});	var dados = {		uuid: uUID,		tabelaCorrigida: [],		paragrafoCorrigido: [],		dataGeracao: dataGeracao,		quantidadeErros: qtdErros,		quantidadeAvisos: qtdAviso,		chave: chave,	};	return new Promise(function (resolve, reject) {		$.post(`https://betha-pdc-prevalidacoes.herokuapp.com/api/arquivo/`, dados, function (data, status) {			resolve(data);		});	});}async function getDadosPorUUID() {	var uUID = document.querySelector(".uuid").innerText;	return new Promise((resolve, reject) => {		$.get(`https://betha-pdc-prevalidacoes.herokuapp.com/api/arquivo/${uUID}`, function (data, status) {			resolve(data);		});	}	);}async function getDadosPorChave() {	var chave = document.querySelector(".parametrosBanco").innerText;	return new Promise((resolve, reject) => {		$.get(`https://betha-pdc-prevalidacoes.herokuapp.com/api/arquivo/chave/${chave}/5/desc`, function (data, status) {			arrayOrdenado = eval(data);			var results = arrayOrdenado['object'];			results.sort(function(a,b){				if(a.dataGeracao == b.dataGeracao)					return 0;				if(a.dataGeracao < b.dataGeracao)					return -1;				if(a.dataGeracao > b.dataGeracao)					return 1;			});			data.object = results;			resolve(data);		});	});}async function atualizaDadosCorrecao(dadosTabela, dadosParagrafo) {	var uUID = document.querySelector(".uuid").innerText.substring(0, 36);	var qtdErros = 0;	var qtdAviso = 0;	var dataGeracao = document.querySelector(".dataGeracao").innerText;	var chave = document.querySelector(".parametrosBanco").innerText;	erroAviso = document.querySelectorAll("h7");	erroAviso.forEach(element => {		if (!element.parentElement.parentElement.id.includes("Todos")) {			if (element.id.includes("qtdErro")) {				qtdErros += Number(element.innerText);			}			if (element.id.includes("qtdAviso")) {				qtdAviso += Number(element.innerText);			}		}	});	var dados = {		uuid: uUID,		tabelaCorrigida: dadosTabela,		paragrafoCorrigido: dadosParagrafo,		dataGeracao: dataGeracao,		quantidadeErros: qtdErros,		quantidadeAvisos: qtdAviso,		quantidadeErrosFixo: qtdErrosFixo,		quantidadeAvisosFixo: qtdAvisosFixo,		chave: chave,	};	$.put(`https://betha-pdc-prevalidacoes.herokuapp.com/api/arquivo/${uUID}`, dados, function (result) {		console.log(result);	});}async function verificaArquivo(uuid) {	return new Promise(function (resolve, reject) {		$.get(`https://betha-pdc-prevalidacoes.herokuapp.com/api/arquivo/${uuid}`, function (data, status) {			if (data.object.length === 0) {				resolve(false);			};			resolve(true);		});	});}async function getTabelasCorrigidas(uuid) {	return new Promise(function (resolve, reject) {		$.get(`https://betha-pdc-prevalidacoes.herokuapp.com/api/arquivo/${uuid}`, function (data, status) {			if (data.object[0].tabelaCorrigida) {				resolve(data.object[0].tabelaCorrigida);			};			resolve(['']);		});	});}async function getParagrafosCorrigidos(uuid) {	return new Promise(function (resolve, reject) {		$.get(`https://betha-pdc-prevalidacoes.herokuapp.com/api/arquivo/${uuid}`, function (data, status) {			if ((data.object[0].paragrafoCorrigido)) {				resolve(data.object[0].paragrafoCorrigido);			};			resolve(['']);		});	});}async function getDadosLocalStorage() {        var uUID = document.querySelector(".uuid").innerText.substring(0, 36);        var arquivoExiste = await verificaArquivo(uUID);        console.log(arquivoExiste);        if (!arquivoExiste) {            console.log(await criaArquivo(uUID));        } else {            var tabelasCorrigida = await getTabelasCorrigidas(uUID);            var paragrafosCorrigido = await getParagrafosCorrigidos(uUID);            if (tabelasCorrigida != "") {                tabelasCorrigida.forEach(tableId => {                    classe = document.getElementById(tableId).getAttribute("class");                    if (classe == 'table-danger') {                        numeroCorrecoes = document.getElementById(paragrafosCorrigido[0]).children[8].innerText;                        numeroErros = document.getElementById(paragrafosCorrigido[0]).children[2].innerText;                        numeroCorrecoes++;                        numeroErros--;                        document.getElementById(paragrafosCorrigido[0]).children[8].innerText = numeroCorrecoes;                        document.getElementById(paragrafosCorrigido[0]).children[2].innerText = numeroErros;                        registrosCorrigidos.push(tableId);                        paragrafosCorrigidos.push(paragrafosCorrigido[0]);                        paragrafosCorrigido.shift();                        tr = document.getElementById(tableId).classList.remove('table-danger');                        tr = document.getElementById(tableId).classList.add('table-success');                        document.getElementById(tableId).children[0].children[0].children[0].checked = true;                    }                    if (classe == 'table-warning') {                        numeroCorrecoes = document.getElementById(paragrafosCorrigido[0]).children[8].innerText;                        numeroAvisos = document.getElementById(paragrafosCorrigido[0]).children[5].innerText;                        numeroCorrecoes++;                        numeroAvisos--;                        document.getElementById(paragrafosCorrigido[0]).children[8].innerText = numeroCorrecoes;                        document.getElementById(paragrafosCorrigido[0]).children[5].innerText = numeroAvisos;                        registrosCorrigidos.push(tableId);                        paragrafosCorrigidos.push(paragrafosCorrigido[0]);                        paragrafosCorrigido.shift();                        tr = document.getElementById(tableId).classList.remove('table-warning');                        tr = document.getElementById(tableId).classList.add('table-success');                        document.getElementById(tableId).children[0].children[0].children[0].checked = true;                    }                });            }        }    }function acaoMostrarEsconder(buttonId){buttonId = `#${buttonId}`;var tabelasCorrigidas = document.querySelector(".table-success");var button = document.querySelector(buttonId);var display = tabelasCorrigidas.style.display;if(display === ""){button.innerText = "MOSTRAR RESOLVIDOS";escondeResolvidos();}else{button.innerText = "ESCONDER RESOLVIDOS";mostraResolvidos();}}function escondeResolvidos() {var corrigidos = document.getElementsByClassName("table-success");for (var i = 0; i < corrigidos.length; i++) {corrigidos[i].style.display = "none";}}function mostraResolvidos() {var corrigidos = document.getElementsByClassName("table-success");for (var i = 0; i < corrigidos.length; i++) {corrigidos[i].style.display = "";}}$(document).ready(function() {getDadosLocalStorage();$("body").popover({template: '<div class="popover med-popover left in" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',container: "body",trigger: "manual",placement: "left",selector: "[data-toggle=popover]"});$("[data-toggle=popover]").on("click", function () {$(this).popover("toggle");});});function marcaResolvido(idTable, paragrafoId) {primeiroErro  = true;primeiroAviso = true;numeroCorrecoes = document.getElementById(paragrafoId).children[8].innerText;        classe = document.getElementById(idTable).getAttribute("class");        if (classe === "table-danger") {            tr = document.getElementById(idTable).classList.remove('table-danger');            tr = document.getElementById(idTable).classList.add('table-success');            numeroCorrecoes++;            numeroErros = document.getElementById(paragrafoId).children[2].innerText;            numeroErros--;            document.getElementById(paragrafoId).children[2].innerText = numeroErros;            document.getElementById(paragrafoId).children[8].innerText = numeroCorrecoes;            registrosCorrigidos.push(idTable);            paragrafosCorrigidos.push(paragrafoId);            atualizaDadosCorrecao(registrosCorrigidos,paragrafosCorrigidos);        }        if (classe === "table-warning") {            tr = document.getElementById(idTable).classList.remove('table-warning');            tr = document.getElementById(idTable).classList.add('table-success');            numeroCorrecoes++;            numeroAvisos = document.getElementById(paragrafoId).children[5].innerText;            numeroAvisos--;            document.getElementById(paragrafoId).children[5].innerText = numeroAvisos;            document.getElementById(paragrafoId).children[8].innerText = numeroCorrecoes;            registrosCorrigidos.push(idTable);            paragrafosCorrigidos.push(paragrafoId);            atualizaDadosCorrecao(registrosCorrigidos,paragrafosCorrigidos);        }        if (classe === "table-success") {            tr = document.getElementById(idTable);            td = tr.getElementsByTagName("td");            var tipoMsg = td[2].innerText;            if (tipoMsg === "Aviso") {                tr = document.getElementById(idTable).classList.remove('table-success');                tr = document.getElementById(idTable).classList.add('table-warning');                numeroCorrecoes--;                numeroAvisos = document.getElementById(paragrafoId).children[5].innerText;                numeroAvisos++;                document.getElementById(paragrafoId).children[5].innerText = numeroAvisos;                document.getElementById(paragrafoId).children[8].innerText = numeroCorrecoes;                for (var i = 0; i < registrosCorrigidos.length; i++) {                    if (registrosCorrigidos[i] === idTable) {                        registrosCorrigidos.splice(i, 1);                    }                }                for (var i = 0; i < paragrafosCorrigidos.length; i++) {                    if (paragrafosCorrigidos[i] === paragrafoId) {					   if(primeiroAviso){                         paragrafosCorrigidos.splice(i, 1);						  primeiroAviso = false;                      }                   }                }                atualizaDadosCorrecao(registrosCorrigidos,paragrafosCorrigidos);            } else {                tr = document.getElementById(idTable).classList.remove('table-success');                tr = document.getElementById(idTable).classList.add('table-danger');                numeroCorrecoes--;                numeroErros = document.getElementById(paragrafoId).children[2].innerText;                numeroErros++;                document.getElementById(paragrafoId).children[2].innerText = numeroErros;                document.getElementById(paragrafoId).children[8].innerText = numeroCorrecoes;                for (var i = 0; i < registrosCorrigidos.length; i++) {                    if (registrosCorrigidos[i] === idTable) {                        registrosCorrigidos.splice(i, 1);                    }                }                for (var i = 0; i < paragrafosCorrigidos.length; i++) {                    if (paragrafosCorrigidos[i] === paragrafoId) {						if(primeiroErro){                        	paragrafosCorrigidos.splice(i, 1);						 	primeiroErro = false;                    	}                    }                }                atualizaDadosCorrecao(registrosCorrigidos,paragrafosCorrigidos);            }        }    }function acaoCheckBoxHeader(sectionId, idCheckBoxHeader) {tipoAcao = document.querySelector(`#${idCheckBoxHeader}`).children[0].getAttribute("class");if(tipoAcao === 'fas fa-check-double'){marcarDesmarcarCheck(sectionId,true);document.querySelector(`#${idCheckBoxHeader}`).children[0].className = 'fas fa-times';}if(tipoAcao === 'fas fa-times'){marcarDesmarcarCheck(sectionId,false);document.querySelector(`#${idCheckBoxHeader}`).children[0].className = 'fas fa-check-double';}}function marcarDesmarcarCheck(sectionId, acao) {query = `#${sectionId}`;section = document.querySelector(query);checkboxes = section.querySelectorAll(".bth-checkbox");paragrafoId = section.children[3].id;tables = section.querySelectorAll('.table');for (var i = 0; i < tables.length; i++) {var tbody = tables[i].children[1];for (var j = 0; j < tbody.children.length; j++) {if(acao){tipoMsg = tbody.children[j].children[2].innerText;if(tbody.children[j].className === 'table-success'){numeroCorrecoes--;document.getElementById(paragrafoId).children[8].innerText = numeroCorrecoes;if(tipoMsg === "Erro"){numeroErros++;document.getElementById(paragrafoId).children[2].innerText = numeroErros;}else{numeroAvisos++;document.getElementById(paragrafoId).children[5].innerText = numeroAvisos;}}if(tipoMsg === "Erro"){tbody.children[j].className = "table-danger";tbody.children[j].children[0].children[0].children[0].checked = false;}else{tbody.children[j].className = "table-warning";tbody.children[j].children[0].children[0].children[0].checked = false;}trId = tbody.children[j].id;marcaResolvido(trId,paragrafoId);}else{if(tbody.children[j].className === 'table-danger'){numeroErros--;numeroCorrecoes++;document.getElementById(paragrafoId).children[8].innerText = numeroCorrecoes;document.getElementById(paragrafoId).children[2].innerText = numeroErros;}if(tbody.children[j].className === 'table-warning'){numeroAvisos--;numeroCorrecoes++;document.getElementById(paragrafoId).children[8].innerText = numeroCorrecoes;document.getElementById(paragrafoId).children[5].innerText = numeroAvisos;}tbody.children[j].className = "table-success";for (var i = 0; i < checkboxes.length; i++) {checkboxes[i].children[0].checked = acao;}numeroCorrecoes--;trId = tbody.children[j].id;marcaResolvido(trId,paragrafoId);}}}if(acao){for (var i = 0; i < checkboxes.length; i++) {checkboxes[i].children[0].checked = acao;}}}</script><body><div id="myModal" class="modal">    <img class="modal-content" id="img01">    <div id="caption"></div></div>  <div id="modalVideo" data-bf-loading-type="dialog" class="modal fade in" style="display: none; z-index: 1070;padding-top: 20px;">    <div style="padding-right: 1000px;" class="modal-dialog" role="document">        <div style="max-width: 1000px; width: 1000px;"  class="modal-content modal-content__sidebar">            <div class="modal-body modal-run">                <div style="width:100%;height:0px;position:relative;padding-bottom:56.250%;">                    <iframe id="iframevideo" src="" frameborder="0" width="100%" height="100%" allowfullscreen style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;">                    </iframe>                </div>            </div>            <div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="escondeModalVideo()">Fechar</button></div>        </div>    </div></div><div style="display: none;" class="uuid">375621079567395</div><div style="display: none;" class="dataGeracao">21-02-2020 16:23:15</div><div style="display: none;" class="parametrosBanco">[object Object],[object Object],[object Object]</div><div style="display: none;" class="idEntidade">123</div><div id="modal1" data-bf-loading-type="dialog" class="modal fade in" style="display: none; z-index: 1070;"><div class="modal-dialog" role="document"><div class="modal-content modal-content__sidebar"><div class="modal-header"><h5 class="modal-title">Parâmetros da execução</h5></button></div><div class="modal-body modal-run"><table class="table table-unfixed table-unstriped"><thead><tr><th>Parâmetro</th><th>Valor</th></tr></thead><tbody><tr><td>Entidade</td><td>Betha</td></tr><tr><td>Mes</td><td>01</td></tr><tr><td>Ano</td><td>2020</td></tr></tbody></table> </div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="escondeModalParametros('modal1')">Fechar</button></div></div></div></div><div class="container container-fluid"><div ui-view="header" class="ng-scope" style=""><header class="ng-scope"><div id="header" class="megamenu-container"><div class="container iv"><ul class="megamenu"><li class="menu-static"><a href="#" class="drop"><div class="bth-logo bth-logo--brand-blue"><div class="bth-logo__image"></div></div><span class="megamenu-title">Relatório de Pré-Validações</span></a></li></ul></div></div></header></div><div class="bth-card"><div class="bth-card__header"><div class="row"><div class="col-md-12"><div class="bth-card bth-card--filled"><div class="bth-card__body"><div class="row row-flex bottom"><div class="col-md-1 text-center"><a target="_blank" href="http://www.betha.com.br/"><img src="https://i.ibb.co/TWSgZX4/logo-share-square.png" alt="logo-share-square" border="0" style="height: 10vh;"></a></div><div class="col-md-6" style="border-left: 1px solid #E1E3E6;padding-left: 15px;"><label style="font-size: 14px">Entidade</label><h2 class="top ng-binding">Teste</h2></div><div class="col-md-3" style="border-left: 1px solid #E1E3E6;padding-left: 15px;"><label style="font-size: 14px">Ano</label><h2 class="top ng-binding">2020</h2></div><div class="col-md-2 text-right"><button class="btn btn-default btn-sm" onclick="mostraModalParametros('modal1')"><i class="fas fa-cogs"></i> Parâmetros</button></div></div></div></div></div></div></div><div class="bth-card__body"><div><p style="font-size: 70%;" ><i class="fas fa-info-circle"></i>  Para acesso a todas as funcionalidades do arquivo, recomendamos a utilização dos navegadores <em>Google Chrome</em> e <em>Firefox</em>.</p><p style="font-size: 70%;" ><i class="fas fa-info-circle"></i> Para que o <em>Link</em> tenha funcionamento adequado, abra este arquivo no mesmo navegador do sistema.</p></div><div class="tabset"><input type="radio" name="tabset" id="Teste15" aria-controls="Teste15" checked><label style="font-size: 15px;" for="Teste15">Teste15</label><div class ="tab-panels"></section><section id="Teste150" class="tab-panel"><button id="btnShow0" type="button" class="btn btn-default btn-sm" onclick="acaoMostrarEsconder('btnShow0')">Esconder resolvidos</button><h2>Teste15</h2><p>Verifique atentamente as validações informadas abaixo:</p><p style="font-size:85%" id ="p0"><i class="fas fa-exclamation-triangle"></i><h7>&nbspErros:</h7><h7 id="qtdErro0">3&nbsp</h7>&nbsp<i class="fas fa-exclamation-circle"></i><h7>&nbspAvisos:</h7><h7 id="qtdAviso0">1&nbsp</h7>&nbsp<i class="fas fa-check-circle"></i><h7>&nbspCorreções:</h7><h7 id="qtdCorrecao&nbsp0">0<h7></p><br><div id="$inputgroup" class="input-group open"><input class="form-control input-sm search-field" type="text" id="inputTodos100" onkeyup='searchTableTodos("0","inputTodos100")' placeholder="Pesquisar"><div class="input-group-btn"><button type="button" class="btn btn-default btn-sm" title="Pesquisar"><i class="fa fa-search"></i></button></div></div><br><table class="table table-unfixed table-unstriped" id="0"><thead><tr><th class="col-fit"><a type="button" class="btn btn-default btn-xs" id="chboxTeste15" onclick="acaoCheckBoxHeader('Teste150','chboxTeste15')" style=""><i class="fas fa-check-double"></i></a></th><th>Sistema</th><th>Tipo</th><th>Descrição</th><th class="col-fit"> Solução</th><th class="col-fit"> Link</th></tr></thead><tbody><tr class="table-danger" id="tr0"><td><div class="bth-checkbox"><input id="chbox0" type="checkbox" class="ng-pristine ng-valid ng-touched" style="" onclick="marcaResolvido('tr0','p0')"><label for="chbox0"></label></div></td><td>Prestação de Contas</td><td>Erro</td><td>Ocorreu um erro x</td><td><button type="button" data-html="true" class="btn btn-default btn-sm" data-toggle="popover" data-trigger="focus" data-placement="left" title="Solução" data-content="Teste y"><i class="fas fa-question"></i></button></td><td><a><button type="button" class="btn btn-default btn-sm disabled" data-toggle="tooltip" data-trigger="focus" title="" data-content="" disabled><i class="fas fa-link"></i></button></a></td><tr class="table-danger" id="tr1"><td><div class="bth-checkbox"><input id="chbox1" type="checkbox" class="ng-pristine ng-valid ng-touched" style="" onclick="marcaResolvido('tr1','p0')"><label for="chbox1"></label></div></td><td>Prestação de Contas</td><td>Erro</td><td>Ocorreu um erro x</td><td><button type="button" data-html="true" class="btn btn-default btn-sm" data-toggle="popover" data-trigger="focus" data-placement="left" title="Solução" data-content="Teste y"><i class="fas fa-question"></i></button></td><td><a><button type="button" class="btn btn-default btn-sm disabled" data-toggle="tooltip" data-trigger="focus" title="" data-content="" disabled><i class="fas fa-link"></i></button></a></td><tr class="table-warning" id="tr2"><td><div class="bth-checkbox"><input id="chbox2" type="checkbox" class="ng-pristine ng-valid ng-touched" style="" onclick="marcaResolvido('tr2','p0')"><label for="chbox2"></label></div></td><td>Prestação de Contas</td><td>Aviso</td><td>Ocorreu um erro x</td><td><button type="button" data-html="true" class="btn btn-default btn-sm" data-toggle="popover" data-trigger="focus" data-placement="left" title="Solução" data-content="Teste y"><i class="fas fa-question"></i></button></td><td><a><button type="button" class="btn btn-default btn-sm disabled" data-toggle="tooltip" data-trigger="focus" title="" data-content="" disabled><i class="fas fa-link"></i></button></a></td><tr class="table-danger" id="tr3"><td><div class="bth-checkbox"><input id="chbox3" type="checkbox" class="ng-pristine ng-valid ng-touched" style="" onclick="marcaResolvido('tr3','p0')"><label for="chbox3"></label></div></td><td>Prestação de Contas</td><td>Erro</td><td>Ocorreu um erro x</td><td><button type="button" data-html="true" class="btn btn-default btn-sm" data-toggle="popover" data-trigger="focus" data-placement="left" title="Solução" data-content="Teste y"><i class="fas fa-question"></i></button></td><td><a><button type="button" class="btn btn-default btn-sm disabled" data-toggle="tooltip" data-trigger="focus" title="" data-content="" disabled><i class="fas fa-link"></i></button></a></td></tbody></table></section></div></div></div><script>    function abrirModalImg(btnId,input,imgId) {        var input = document.querySelector(input);        var btn = document.querySelector(btnId);        var modal = document.querySelector("#myModal");        var img = document.querySelector(imgId);        var modalImg = document.querySelector("#img01");        var captionText = document.querySelector("#caption");        btn.onclick = function () {            modal.style.display = "block";            modalImg.src = img.src;            captionText.innerHTML = img.alt;            input.style.display = "none";        };        modal.onclick = function () {            input.style.display = "";            modal.style.display = "none";        };    btn.onclick();    };function abrirModalImgTodos(btnId,imgId) {    var btn = document.querySelector(btnId);    var modal = document.querySelector("#myModal");    var img = document.querySelector(imgId);    var modalImg = document.querySelector("#img01");    var captionText = document.querySelector("#caption");    btn.onclick = function () {        modal.style.display = "block";        modalImg.src = img.src;        captionText.innerHTML = img.alt;    };    modal.onclick = function () {        modal.style.display = "none";    };    btn.onclick();}   function abrirModalVideoTodos(srcVideo) {    var iframe = document.querySelector("#iframevideo").src = srcVideo;    var display = document.querySelector("#modalVideo").style.display;    if (display === "none") {        var display = document.querySelector("#modalVideo").style.display = "block";    }};function escondeModalVideo() {    document.querySelector("#modalVideo").style.display = "none";};$(document).keyup(function (e) {    var modals = document.querySelectorAll('.modal');    if (e.key === "Escape") {        modals.forEach(modal => {            modal.style.display = "none";        });    }});</script></body></html>